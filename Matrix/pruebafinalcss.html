<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Matrix Galactic Odyssey - News API</title>
  
  <!-- CSS FILES - ORDEN IMPORTANTE -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/pruebafinalcss.css" />
  <!-- ⭐ NUEVO: CSS específico para sección de noticias -->
  <link rel="stylesheet" href="css/hackers-section.css" />
  <link rel="stylesheet" href="css/jedi-section-sinAuto.css" />
  <link rel="stylesheet" href="css/matrix.css" />  
  <link rel="stylesheet" href="css/algorithm-section.css" />
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📰</text></svg>">
</head>
<body>
  <div class="container">
    <h1>📰 DIE GALAKTISCHE NEWS ODYSSEE</h1>
    <div class="lightsaber"></div>

    <!-- Navigation -->
    <div class="navigation-tabs">
      <button class="nav-button active" id="matrix-tab">Matrix Voyager</button>
      <button class="nav-button" id="nasa-tab">NASA Daten</button>
      <button class="nav-button" id="jedi-tab">Jedi Weisheit</button>
      <button class="nav-button" id="weather-tab">Wetter</button>
      <button class="nav-button" id="hackers-tab">📰 Real News API</button>
      <button class="nav-button" id="algorithm-tab">🚀 Dijkstra</button>
    </div>

    <!-- MATRIX SECTION -->
    <div id="matrix-section">
  <div class="matrix-size-container">
    <label for="matrix-size">Matrix Größe:</label>
    <input type="number" id="matrix-size" min="2" max="10" value="3" />
    <button class="button" onclick="loadExampleMatrices()">Beispiele laden</button>
  </div>

  <h2>MATRIX VOYAGER - Sternnavigationssystem</h2>
  
  <!-- Contenedor de matrices del maestro -->
  <div class="matrix-container">
    <div class="matrix-display">
      <div class="matrix-title">Matrix 1 (JSON Format)</div>
      <textarea 
        id="matrix_1" 
        class="matrix-textarea"
        placeholder='[[1,0,1],[0,1,0],[1,0,1]]'
        rows="4"
        cols="30">
      </textarea>
      <div style="text-align: center; margin-top: 10px;">
        <button class="button" onclick="clearMatrix1()">🗑️ Löschen</button>
        <button class="button" onclick="validateMatrix1()">✅ Validieren</button>
      </div>
    </div>
    
    <div class="matrix-display">
      <div class="matrix-title">Matrix 2 (JSON Format)</div>
      <textarea 
        id="matrix_2" 
        class="matrix-textarea"
        placeholder='[[0,1,0],[1,0,1],[0,1,0]]'
        rows="4"
        cols="30">
      </textarea>
      <div style="text-align: center; margin-top: 10px;">
        <button class="button" onclick="clearMatrix2()">🗑️ Löschen</button>
        <button class="button" onclick="validateMatrix2()">✅ Validieren</button>
      </div>
    </div>
  </div>

  <div class="lightsaber alt"></div>
  <h2>Fortgeschrittene Galaktische Berechnungen</h2>
  
  <!-- Output del maestro -->
  <div id="output" class="output">MATRIX VOYAGER wartet auf Befehle...</div>
  
  <!-- Botones principales -->
  <div class="buttons-container">
    <button class="button" onclick="calculateMatrix()">🚀 Berechnen</button>
    <button class="button" onclick="clearOutput()">🗑️ Output löschen</button>
  </div>

  <!-- Toast para mensajes (opcional si usas Bootstrap) -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto">Matrix Voyager</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body" id="toast_body">
        <!-- Mensaje aparece aquí -->
      </div>
    </div>
  </div>
</div>
    <!-- NASA SECTION -->
    <div id="nasa-section" style="display: none;">
      <div class="lightsaber alt"></div>
      <h2>🌟 NASA Daten</h2>
      <div id="react-root"></div>
    </div>

    <!-- JEDI SECTION -->
    <div id="jedi-section" style="display: none;">
      <div class="lightsaber alt"></div>
      <h2>🌟 Jedi Weisheit</h2>
      <div style="text-align: center; margin: 30px 0;">
        <button class="button" onclick="getJediWisdom()">
          <span style="margin-right: 10px;">⚔️</span> Neue Jedi-Weisheit erhalten
        </button>
      </div>
      <div id="jedi-output" class="output" style="margin-top: 20px; min-height: 150px; display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center;">
          <div style="color: #90EE90; font-size: 1.8em; font-style: italic; margin-bottom: 20px;">
            "Möge die Macht mit dir sein!"
          </div>
          <div style="color: var(--accent-color); font-size: 1.1em;">
            - Obi-Wan Kenobi
          </div>
        </div>
      </div>
      <div style="margin-top: 40px; text-align: center;">
        <h3 style="color: var(--primary-color); margin-bottom: 20px;">Zufällige Jedi-Herausforderung</h3>
        <button class="button" onclick="getJediChallenge()">
          <span style="margin-right: 5px;">🎯</span> Tägliche Herausforderung
        </button>
        <div id="jedi-challenge" class="output" style="margin-top: 20px; padding: 20px;">
          Klicke für deine heutige Jedi-Herausforderung...
        </div>
      </div>
    </div>

    <!-- WEATHER SECTION -->
    <div id="weather-section" style="display: none;">
      <div class="lightsaber alt"></div>
      <h2>🌍 Wetter</h2>
      <div class="weather-input">
        <input type="text" id="city-input" placeholder="Stadt eingeben..." />
        <button class="button" onclick="getSimpleWeather()">Wetter abrufen</button>
      </div>
      <div id="weather-output" class="output" style="min-height: 400px; max-width: 600px; margin: 20px auto;">
        <div style="text-align: center;">Geben Sie eine Stadt ein, um das Wetter zu sehen...</div>
      </div>
    </div>

    <!-- NEWS SECTION - CON CLASES ESPECÍFICAS -->
    <div id="hackers-section" style="display: none;">
      <div class="lightsaber alt"></div>
      <h2>📰 Real-Time News API Dashboard</h2>
      
      <!-- API Status con clases específicas -->
      <div class="api-status">
        <h4>🔗 Live API Connection Status</h4>
        <div style="color: var(--accent-color); font-size: 0.9em;">
          <strong>Primary API:</strong> jsonplaceholder.typicode.com/posts<br>
          <strong>Backup:</strong> Local news database<br>
          <strong>Status:</strong> 
          <span class="status-indicator status-online"></span>
          <span style="color: var(--success-color);">Ready</span>
        </div>
      </div>
      
      <!-- Controles con clases específicas -->
      <div class="controls-container">
        <button class="button" onclick="loadVulnerabilities()">
          🛡️ Security Database
        </button>
        <button class="button news-feed" onclick="loadHackerNews()">
          📰 Real News Feed
        </button>
        <button class="button local-news" onclick="loadLocalNews()">
          📚 Local Backup
        </button>
        <button class="button breaches" onclick="checkBreaches()">
          💀 Data Breaches
        </button>
      </div>
      
      <!-- Containers con mejores estilos -->
      <div id="vulnerabilities-container" class="output">
        <div class="loading">
          🔍 Click <strong>"Security Database"</strong> to load vulnerability data...
        </div>
      </div>
      
      <div id="security-news-container" class="output">
        <div class="loading">
          📰 Click <strong>"Real News Feed"</strong> to connect to live API or <strong>"Local Backup"</strong> for offline data...
        </div>
      </div>
      
      <div id="breaches-container" class="output">
        <div class="loading">
          💻 Click <strong>"Data Breaches"</strong> to view historical cybersecurity incidents...
        </div>
      </div>
      
      <!-- Footer informativo con clases específicas -->
      <div class="info-footer">
        <strong>📊 Technical Info:</strong> Real-time data from JSONPlaceholder API • 
        100% free and reliable • No API key required • 
        Local backup system included • 
        <span style="color: var(--success-color);">Production ready</span>
      </div>
    </div>
    <!-- DIJKSTRA SECTION - PASO A PASO -->
    <div id="algorithm-section" style="display: none;">
      <div class="lightsaber alt"></div>
      <h2>🚀 DIJKSTRA VOYAGER - Galaktische Pfadfindung</h2>
      
      <!-- Control de aplicación -->
      <div class="control-panel">
        <h3>🔧 Anwendungssteuerung</h3>
        <div class="buttons-row">
          <button class="button" onclick="initializeApp()">
            <span style="margin-right: 5px;">🔧</span> App initialisieren
          </button>
          <button class="button" onclick="loadRandomData()">
            <span style="margin-right: 5px;">🎲</span> Zufällige Daten
          </button>
          <button class="button" onclick="clearApp()">
            <span style="margin-right: 5px;">🗑️</span> App löschen
          </button>
        </div>
        
        <div class="status-display" id="app-status">
          App-Status: Nicht initialisiert ❌
        </div>
      </div>
      
      <!-- Contenedor del grafo -->
      <div class="graph-panel">
        <h3>📊 Visualisierung</h3>
        <div id="graph-container" style="width: 100%; height: 400px; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--primary-color); border-radius: 8px; margin: 10px 0;">
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: var(--accent-color); font-size: 1.2em;">
            Klicken Sie auf "App initialisieren" um zu beginnen
          </div>
        </div>
        
        <div style="text-align: center; margin: 10px 0;">
          <button class="button" onclick="showGraphStats()">
            <span style="margin-right: 5px;">📈</span> Graph-Statistiken
          </button>
          <button class="button" onclick="resetGraphManual()">
            <span style="margin-right: 5px;">🔄</span> Graph zurücksetzen
          </button>
        </div>
      </div>
      
      <!-- Selección de nodos -->
      <div class="node-selection">
        <h3>🎯 Knotenauswahl für Dijkstra</h3>
        <div class="input-row">
          <div class="input-group">
            <label for="start-node">Start-Knoten:</label>
            <input type="text" id="start-node" placeholder="node1" />
          </div>
          
          <div class="input-group">
            <label for="end-node">Ziel-Knoten:</label>
            <input type="text" id="end-node" placeholder="node3" />
          </div>
        </div>
        
        <div style="text-align: center; margin: 15px 0;">
          <button class="button" onclick="selectNodesManually()">
            <span style="margin-right: 5px;">🎯</span> Knoten auswählen
          </button>
        </div>
        
        <div style="text-align: center; font-size: 0.9em; color: var(--accent-color); margin-top: 10px;">
          💡 Tipp: Verwenden Sie die Graph-Statistiken um verfügbare Knoten zu sehen
        </div>
      </div>
      
      <!-- Algoritmos Dijkstra -->
      <div class="algorithm-panel">
        <h3>⚡ Dijkstra Algorithmus</h3>
        <div class="buttons-row">
          <button class="button dijkstra-button" onclick="runDijkstraWithLogging()">
            <span style="margin-right: 5px;">📊</span> Dijkstra mit Logging
          </button>
          <button class="button dijkstra-button" onclick="runDijkstraSilent()">
            <span style="margin-right: 5px;">🔇</span> Dijkstra stumm
          </button>
        </div>
        
        <div style="text-align: center; font-size: 0.9em; color: var(--accent-color); margin-top: 10px;">
          ⚠️ Stellen Sie sicher, dass Start- und Zielknoten ausgewählt sind
        </div>
      </div>
      
      <!-- Output del algoritmo -->
      <div class="output-panel">
        <h3>📋 Ergebnisse</h3>
        <div id="algorithm-output" class="output">
          DIJKSTRA VOYAGER wartet auf Befehle...
        </div>
        
        <div style="text-align: center; margin-top: 15px;">
          <button class="button" onclick="clearAlgorithmOutput()">
            <span style="margin-right: 5px;">🗑️</span> Output löschen
          </button>
        </div>
      </div>
      
      <!-- Información de ayuda -->
      <div class="help-panel">
        <h3>❓ Anweisungen</h3>
        <div style="background: rgba(0, 20, 40, 0.4); padding: 15px; border-radius: 8px; font-size: 0.9em; line-height: 1.6;">
          <strong>Schritt für Schritt:</strong><br>
          1️⃣ App initialisieren<br>
          2️⃣ Optional: Zufällige Daten laden<br>
          3️⃣ Start- und Zielknoten eingeben (z.B. node1, node3)<br>
          4️⃣ Knoten auswählen<br>
          5️⃣ Dijkstra-Algorithmus ausführen<br>
          <br>
          <strong>Farben im Grafen:</strong><br>
          🟢 Grün = Start-Knoten<br>
          🔴 Rot = Ziel-Knoten<br>
          🟡 Gelb = Pfad-Knoten<br>
          🔴 Rote Linien = Kürzester Pfad
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <!-- Scripts base -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- JavaScript Files originales -->
    <script src="js/matriySinAuto.js"></script>
    <script src="js/jediSinAuto.js"></script>
    <script src="js/climaSinAuto.js"></script>
    <script src="js/hackersSinAuto.js"></script>
    <script type="text/babel" src="js/nasa-sinAuto.js"></script>
    
    <!-- Cytoscape ANTES de los módulos de Dijkstra -->
    <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>

    <!-- DIJKSTRA: Importar módulos y hacer funciones globales -->
    <script type="module">
      console.log("🔧 Iniciando carga de módulos Dijkstra...");
      
      try {
        // Verificar que Cytoscape está disponible
        if (typeof cytoscape === 'undefined') {
          throw new Error('Cytoscape no está cargado');
        }
        console.log("✅ Cytoscape disponible");
        
        // Importar funciones desde los archivos compilados
        const { 
          initializeApp, 
          loadRandomData, 
          getApp, 
          isAppReady, 
          clearApp,
          selectNodesManually,
          runDijkstraWithLogging,
          runDijkstraSilent,
          resetGraphManual,
          showGraphStats,
          clearAlgorithmOutput
        } = await import('./js/main-sinAuto.js');
        
        // Hacer funciones disponibles globalmente
        window.initializeApp = initializeApp;
        window.loadRandomData = loadRandomData;
        window.getApp = getApp;
        window.isAppReady = isAppReady;
        window.clearApp = clearApp;
        window.selectNodesManually = selectNodesManually;
        window.runDijkstraWithLogging = runDijkstraWithLogging;
        window.runDijkstraSilent = runDijkstraSilent;
        window.resetGraphManual = resetGraphManual;
        window.showGraphStats = showGraphStats;
        window.clearAlgorithmOutput = clearAlgorithmOutput;
        
        console.log("🚀 Dijkstra Voyager módulos cargados correctamente");
        console.log("✅ Funciones disponibles:", {
          initializeApp: typeof window.initializeApp,
          loadRandomData: typeof window.loadRandomData,
          selectNodesManually: typeof window.selectNodesManually,
          runDijkstraWithLogging: typeof window.runDijkstraWithLogging
        });
        
      } catch (error) {
        console.error("❌ Error cargando módulos Dijkstra:", error);
        console.log("📝 Verifica que los archivos js/app.js, js/dijkstra-sinAuto.js y js/main-sinAuto.js existen");
      }
    </script>

    <!-- NAVEGACIÓN: Función showSection actualizada -->
    <script>
      console.log("🔧 Configurando navegación...");
      
      // Guardar función original si existe
      const originalShowSection = window.showSection;
      
      window.showSection = function(sectionId) {
        console.log(`🔀 Cambiando a sección: ${sectionId}`);
        
        // Llamar función original si existe
        if (originalShowSection) {
          originalShowSection(sectionId);
        } else {
          // Función básica de navegación
          const sections = ['matrix-section', 'nasa-section', 'jedi-section', 'weather-section', 'hackers-section', 'algorithm-section'];
          
          // Ocultar todas las secciones
          sections.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
              element.style.display = 'none';
            }
          });
          
          // Quitar active de todos los botones
          const navButtons = document.querySelectorAll('.nav-button');
          navButtons.forEach(btn => btn.classList.remove('active'));
        }
        
        // Mostrar la sección seleccionada
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
          targetSection.style.display = 'block';
          console.log(`✅ Sección ${sectionId} mostrada`);
        } else {
          console.warn(`⚠️ Sección ${sectionId} no encontrada`);
        }
        
        // Activar el botón correspondiente
        const buttonMap = {
          'matrix-section': 'matrix-tab',
          'nasa-section': 'nasa-tab', 
          'jedi-section': 'jedi-tab',
          'weather-section': 'weather-tab',
          'hackers-section': 'hackers-tab',
          'algorithm-section': 'algorithm-tab'
        };
        
        const targetButton = document.getElementById(buttonMap[sectionId]);
        if (targetButton) {
          targetButton.classList.add('active');
        }
      };
      
      // Event listener para el botón de Dijkstra
      document.addEventListener('DOMContentLoaded', function() {
        console.log("🔧 DOM cargado, configurando eventos...");
        
        const algorithmTab = document.getElementById('algorithm-tab');
        if (algorithmTab) {
          algorithmTab.addEventListener('click', function() {
            window.showSection('algorithm-section');
          });
          console.log("✅ Event listener para Dijkstra configurado");
        } else {
          console.warn("⚠️ Botón algorithm-tab no encontrado");
        }
      });
    </script>
  </div>
</body>
</html>
