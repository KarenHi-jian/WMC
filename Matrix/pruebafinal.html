<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIE ODYSSEE DER GALAKTISCHEN BERECHNUNG</title>
    <style>
        :root {
            --primary-color: #00BFFF; 
            --primary-glow: rgba(0, 191, 255, 0.7);
            --secondary-color: #1E90FF;
            --accent-color: #87CEFA; 
            --space-black: #000;
        }
        
        body {
            background-color: var(--space-black);
            color: #fff;
            font-family: Arial, sans-serif; 
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #000000, #0b0b2a, #1a0b35);
            background-attachment: fixed;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 40px auto;
            background-color: rgba(0, 0, 20, 0.8);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px var(--primary-glow);
            position: relative;
            z-index: 2;
        }
        
        h1, h2, h3 {
            color: var(--primary-color);
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 30px;
            text-shadow: 0 0 10px var(--primary-glow);
        }
        
        h2 {
            font-size: 28px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 40px;
        }
        
        .lightsaber {
            height: 5px;
            background: var(--primary-color);
            margin: 30px 0;
            position: relative;
            box-shadow: 0 0 15px var(--primary-glow);
            border-radius: 2px;
        }
        
        .lightsaber.alt {
            background: var(--secondary-color);
            box-shadow: 0 0 15px var(--secondary-color);
        }
        
        .matrix-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .matrix-display {
            margin: 15px;
            position: relative;
        }
        
        .matrix-title {
            text-align: center;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        table {
            border-collapse: collapse;
            background-color: rgba(0, 191, 255, 0.1);
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 10px var(--primary-glow);
        }
        
        td {
            border: 1px solid var(--primary-color);
            padding: 5px;
            text-align: center;
            width: 40px;
            height: 40px;
        }
        
        input.matrix-input {
            width: 30px;
            height: 30px;
            background-color: rgba(0, 20, 40, 0.7);
            color: white;
            border: 1px solid var(--primary-color);
            text-align: center;
            font-size: 16px;
            -moz-appearance: textfield;
        }
        
        input.matrix-input::-webkit-outer-spin-button,
        input.matrix-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .output {
            background-color: rgba(0, 0, 20, 0.7);
            border: 2px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            color: var(--accent-color);
            box-shadow: 0 0 10px var(--primary-glow);
            overflow-x: auto;
            font-size: 16px;
            min-height: 300px; /* Altura mínima aumentada */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .button {
            background-color: rgba(0, 0, 20, 0.7);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 12px 24px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-family: Arial, sans-serif;
            font-size: 18px;
            text-transform: uppercase;
            transition: all 0.3s;
            box-shadow: 0 0 10px var(--primary-glow);
        }
        
        .button:hover {
            background-color: var(--primary-color);
            color: var(--space-black);
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .buttons-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        .matrix-size-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
        
        .matrix-size-container label {
            margin-right: 10px;
            color: var(--accent-color);
        }
        
        .matrix-size-container input {
            width: 50px;
            background-color: rgba(0, 20, 40, 0.7);
            color: white;
            border: 1px solid var(--primary-color);
            text-align: center;
            padding: 5px;
            margin-right: 10px;
            -moz-appearance: textfield;
        }
        
        .navigation-tabs {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .nav-button {
            background-color: rgba(0, 0, 20, 0.7);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .nav-button.active {
            background-color: var(--primary-color);
            color: var(--space-black);
            box-shadow: 0 0 15px var(--primary-glow);
        }
        
        .nav-button:hover {
            background-color: var(--primary-color);
            color: var(--space-black);
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .loading {
            text-align: center;
            color: var(--primary-color);
            font-size: 20px;
            margin: 40px 0;
        }
        
        .error-box {
            background-color: rgba(255, 0, 0, 0.2);
            border: 2px solid #ff0000;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            color: #ff9999;
            text-align: center;
        }
        
        .nasa-image {
            width: 100%;
            max-width: 100%;
            border-radius: 5px;
            margin: 20px 0;
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .mission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .mission-card {
            background-color: rgba(0, 0, 20, 0.7);
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 0 10px var(--primary-glow);
        }
        
        .mission-card h3 {
            font-size: 20px;
            margin-bottom: 15px;
            text-align: left;
        }
        
        .mission-info {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .mission-info span:first-child {
            color: var(--accent-color);
        }
        
        .mission-info span:last-child {
            color: white;
        }
        
        .weather-input {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .weather-input input {
            background-color: rgba(0, 20, 40, 0.7);
            color: white;
            border: 1px solid var(--primary-color);
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            width: 250px;
        }
        
        .info-box {
            background-color: rgba(0, 191, 255, 0.1);
            border: 2px solid var(--primary-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-size: 14px;
            text-align: center;
        }
    </style>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>DIE ODYSSEE DER GALAKTISCHEN BERECHNUNG</h1>
        
        <div class="lightsaber"></div>
        
        <div class="navigation-tabs">
            <button class="nav-button active" id="matrix-tab">Matrix Voyager</button>
            <button class="nav-button" id="nasa-tab">NASA Daten</button>
            <button class="nav-button" id="jedi-tab">Jedi Weisheit</button>
            <button class="nav-button" id="weather-tab">Wetter</button>
        </div>
        
        <div id="matrix-section">
            <div class="matrix-size-container">
                <label for="matrix-size">Matrix Größe:</label>
                <input type="number" id="matrix-size" min="2" max="10" value="3">
                <button class="button" id="resize-btn">Ändern</button>
            </div>
            
            <h2>MATRIX VOYAGER - Sternnavigationssystem</h2>
            
            <div class="matrix-container">
                <div class="matrix-display">
                    <div class="matrix-title">Rebellenbasis (adj1)</div>
                    <div id="adj1-matrix"></div>
                </div>
                
                <div class="matrix-display">
                    <div class="matrix-title">Imperiale Station (adj2)</div>
                    <div id="adj2-matrix"></div>
                </div>
            </div>
            
            <div class="buttons-container">
                <button class="button" id="use-matrix1-btn">Matrix 1 Verwenden</button>
                <button class="button" id="use-matrix2-btn">Matrix 2 Verwenden</button>
            </div>
            
            <div class="lightsaber alt"></div>
            
            <h2>Fortgeschrittene Galaktische Berechnungen</h2>
            
            <div id="output" class="output">MATRIX VOYAGER wartet auf Befehle...</div>
            
            <div class="buttons-container">
                <button class="button" id="calculate-btn">Berechnen</button>
                <button class="button" id="clear-btn">Löschen</button>
            </div>
        </div>
        
        <div id="nasa-section" style="display: none;">
            <div id="react-root"></div>
        </div>

        <div id="jedi-section" style="display: none;">
            <div class="lightsaber alt"></div>
            <h2>🌟 Jedi Weisheit</h2>
            
            <div style="text-align: center; margin: 30px 0;">
                <button class="button" onclick="getJediWisdom()" style="font-size: 1.1em;">
                    <span style="margin-right: 10px;">⚔️</span> 
                    Neue Jedi-Weisheit erhalten
                </button>
            </div>
            
            <div id="jedi-output" class="output" style="margin-top: 20px; min-height: 150px; display: flex; align-items: center; justify-content: center;">
                <div style="text-align: center;">
                    <div style="color: #90EE90; font-size: 1.8em; font-style: italic; margin-bottom: 20px;">
                        "Möge die Macht mit dir sein!"
                    </div>
                    <div style="color: var(--accent-color); font-size: 1.1em;">
                        - Obi-Wan Kenobi
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 40px; text-align: center;">
                <h3 style="color: var(--primary-color); margin-bottom: 20px;">Zufällige Jedi-Herausforderung</h3>
                <button class="button" onclick="getJediChallenge()">
                    <span style="margin-right: 5px;">🎯</span> 
                    Tägliche Herausforderung
                </button>
                <div id="jedi-challenge" class="output" style="margin-top: 20px; padding: 20px;">
                    Klicke für deine heutige Jedi-Herausforderung...
                </div>
            </div>
        </div>

        <div id="weather-section" style="display: none;">
            <div class="lightsaber alt"></div>
            <h2>🌍 Wetter</h2>
            
            <div class="weather-input">
                <input type="text" id="city-input" placeholder="Stadt eingeben...">
                <button class="button" onclick="getSimpleWeather()">
                    Wetter abrufen
                </button>
            </div>
            
            <div id="weather-output" class="output" style="min-height: 400px; max-width: 600px; margin: 20px auto;">
                <div style="text-align: center;">
                    Geben Sie eine Stadt ein, um das Wetter zu sehen...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Matrices de adyacencia iniciales
        let adj1 = [
            [0, 1, 0],
            [1, 0, 1],
            [0, 1, 0],
        ];

        let adj2 = [
            [0, 1, 1],
            [1, 0, 1],
            [1, 1, 0],
        ];

        let activeMatrix = adj2; // Matriz activa para cálculos
        
        // Función para crear matriz editable
        function createEditableMatrix(matrix, elementId, matrixNumber) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            const table = document.createElement('table');
            
            for (let i = 0; i < matrix.length; i++) {
                const row = document.createElement('tr');
                
                for (let j = 0; j < matrix[i].length; j++) {
                    const cell = document.createElement('td');
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.min = '0';
                    input.className = 'matrix-input';
                    input.value = matrix[i][j];
                    input.dataset.row = i;
                    input.dataset.col = j;
                    input.dataset.matrix = matrixNumber;
                    
                    // Event listener para actualizar la matriz cuando se cambia el valor
                    input.addEventListener('input', function(e) {
                        const row = parseInt(this.dataset.row);
                        const col = parseInt(this.dataset.col);
                        const matrixNum = parseInt(this.dataset.matrix);
                        let value = parseInt(this.value);
                        
                        // Asegurarse de que el valor sea un número válido
                        if (isNaN(value)) {
                            value = 0;
                            this.value = "0";
                        }
                        
                        if (matrixNum === 1) {
                            adj1[row][col] = value;
                        } else {
                            adj2[row][col] = value;
                        }
                    });
                    
                    // Seleccionar todo el texto al hacer clic
                    input.addEventListener('focus', function() {
                        this.select();
                    });
                    
                    cell.appendChild(input);
                    row.appendChild(cell);
                }
                
                table.appendChild(row);
            }
            
            container.appendChild(table);
        }
        
        // Función para crear una matriz de tamaño n×n
        function createMatrix(n, fillValue = 0) {
            return Array(n).fill().map(() => Array(n).fill(fillValue));
        }
        
        // Función para imprimir matrices
        function printAdj(matrix) {
            let result = '';
            for (let z = 0; z < matrix.length; z++) {
                result += `Zeile ${z}: ${matrix[z].join(" ")}\n`;
            }
            return result;
        }

        // Función de multiplicación de matrices
        function multiply(m_A, m_B) {
            const n = m_A.length;
            const rv = createMatrix(n, 0);
            
            for (let z = 0; z < n; z++) {
                for (let s = 0; s < n; s++) {
                    let wert = 0;
                    for (let i = 0; i < n; i++) {
                        wert += m_A[z][i] * m_B[i][s];
                    }
                    rv[z][s] = wert;
                }
            }
            
            return rv;
        }

        function calculateDistances(matrix) {
            const n = matrix.length;
            const allDistances = createMatrix(n, Infinity);
            
            // Ejecutar Dijkstra desde cada nodo
            for (let i = 0; i < n; i++) {
                allDistances[i] = dijkstraSimple(matrix, i);
            }
            
            return allDistances;
        }
            
        // Función Dijkstra simple - CORREGIDA
        function dijkstraSimple(matrix, start) {
            const n = matrix.length;
            const distances = new Array(n).fill(Infinity);
            const visited = new Array(n).fill(false);
            
            distances[start] = 0;
            
            for (let count = 0; count < n; count++) {
                let minDist = Infinity;
                let current = -1;
                
                // Encontrar el nodo no visitado con menor distancia
                for (let i = 0; i < n; i++) {
                    if (!visited[i] && distances[i] < minDist) {
                        minDist = distances[i];
                        current = i;
                    }
                }
                
                // Si no encontramos nodo, terminar
                if (current === -1) break;
                
                // Marcar como visitado
                visited[current] = true;
                
                // Actualizar distancias de los vecinos
                for (let neighbor = 0; neighbor < n; neighbor++) {
                    if (matrix[current][neighbor] > 0 && !visited[neighbor]) {
                        const newDist = distances[current] + 1; // Usa 1 porque es no ponderado
                        
                        if (newDist < distances[neighbor]) {
                            distances[neighbor] = newDist;
                        }
                    }
                }
            }
            
            return distances;
        }
        
        // Función para calcular excentricidad
        function calculateEccentricity(distances) {
            const n = distances.length;
            const eccentricity = [];
            
            for (let i = 0; i < n; i++) {
                let maxDist = 0;
                for (let j = 0; j < n; j++) {
                    if (distances[i][j] !== Infinity && distances[i][j] > maxDist) {
                        maxDist = distances[i][j];
                    }
                }
                eccentricity.push(maxDist);
            }
            
            return eccentricity;
        }

        // Función para calcular el radio
        function calculateRadius(eccentricity) {
            let minEccentricity = Infinity;
            
            for (let i = 0; i < eccentricity.length; i++) {
                if (eccentricity[i] > 0 && eccentricity[i] < minEccentricity) {
                    minEccentricity = eccentricity[i];
                }
            }
            
            return minEccentricity === Infinity ? 0 : minEccentricity;
        }

        // Frases de Jedi Weisheit
        const jediQuotes = [
            { text: "Tue es oder tue es nicht. Es gibt kein Versuchen.", author: "Yoda" },
            { text: "Die Furcht ist der Pfad zur dunklen Seite.", author: "Yoda" },
            { text: "In meiner Erfahrung gibt es keinen Zufall.", author: "Obi-Wan Kenobi" },
            { text: "Möge die Macht mit dir sein!", author: "Obi-Wan Kenobi" },
            { text: "Deine Augen können dich täuschen, traue ihnen nicht.", author: "Obi-Wan Kenobi" },
            { text: "Die Macht wird mit dir sein, immer.", author: "Obi-Wan Kenobi" },
            { text: "Geduld du haben musst, junger Padawan.", author: "Yoda" },
            { text: "Viel zu lernen du noch hast.", author: "Yoda" },
            { text: "Der größte Lehrer Versagen ist.", author: "Yoda" },
            { text: "Nicht durch Grübeln, durch Handeln erlangt man Weisheit.", author: "Qui-Gon Jinn" },
            { text: "Die Macht ist nicht gut oder böse. Es kommt darauf an, wer sie nutzt.", author: "Qui-Gon Jinn" },
            { text: "Ein Jedi nutzt die Macht für Wissen und Verteidigung, niemals für Angriffe.", author: "Yoda" },
            { text: "Furcht führt zu Wut, Wut führt zu Hass, Hass führt zu Leid.", author: "Yoda" },
            { text: "Das gehört nicht zu den Wegen eines Jedi.", author: "Obi-Wan Kenobi" },
            { text: "Kontrolle, Kontrolle, du musst lernen Kontrolle!", author: "Yoda" },
            { text: "Immer zu zweit sie sind. Nicht mehr, nicht weniger.", author: "Yoda" },
            { text: "Der dunklen Seite schwer zu sehen die Zukunft ist.", author: "Yoda" },
            { text: "Abenteuer? Aufregung? Ein Jedi verlangt nicht nach solchen Dingen.", author: "Yoda" },
            { text: "Krieg macht niemanden groß.", author: "Yoda" },
            { text: "Das Unmögliche zu tun, das ist der Weg der Jedi.", author: "Luke Skywalker" }
        ];

        const jediChallenges = [
            "Meditiere heute 10 Minuten in völliger Stille, spüre die Macht um dich herum.",
            "Hilf heute jemandem selbstlos, ohne eine Gegenleistung zu erwarten.",
            "Beherrsche deine Emotionen: Wenn du wütend wirst, atme tief und zähle bis 10.",
            "Trainiere deinen Körper: Mache 20 Liegestütze wie ein Padawan.",
            "Lerne etwas Neues: Ein Jedi hört niemals auf zu lernen.",
            "Verzichte heute auf etwas, das du magst, um Disziplin zu üben.",
            "Löse einen Konflikt friedlich, nutze Diplomatie statt Gewalt.",
            "Verbringe Zeit in der Natur, spüre die lebendige Macht.",
            "Übe Geduld: Warte 5 Minuten bevor du auf eine Nachricht antwortest.",
            "Zeige Mitgefühl: Höre jemandem zu, ohne zu urteilen.",
            "Trainiere deinen Geist: Löse ein Rätsel oder lerne eine neue Fähigkeit.",
            "Praktiziere Demut: Gestehe einen Fehler ein und lerne daraus.",
            "Sei achtsam: Esse eine Mahlzeit in völliger Konzentration, ohne Ablenkung.",
            "Teile dein Wissen: Lehre jemanden etwas, das du gut kannst.",
            "Überwinde eine Furcht: Stelle dich heute einer kleinen Angst."
        ];

        function getJediWisdom() {
            const output = document.getElementById('jedi-output');
            
            // Zufällige Weisheit auswählen
            const randomQuote = jediQuotes[Math.floor(Math.random() * jediQuotes.length)];
            
            // Animierter Effekt
            output.style.opacity = '0';
            
            setTimeout(() => {
                output.innerHTML = `
                    <div style="text-align: center;">
                        <div style="color: #90EE90; font-size: 1.8em; font-style: italic; 
                            margin-bottom: 20px; line-height: 1.4; padding: 0 20px;">
                            "${randomQuote.text}"
                        </div>
                        <div style="color: var(--accent-color); font-size: 1.1em;">
                            - ${randomQuote.author}
                        </div>
                        <div style="margin-top: 30px;">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwQkZGRiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPHBhdGggZD0iTTEwIDIwIEwyMCA1IEwzMCAyMCBMMjUgMjAgTDI1IDM1IEwxNSAzNSBMMTUgMjAgWiIgZmlsbD0iIzAwQkZGRiIvPgo8L3N2Zz4=" 
                                 alt="Jedi Symbol" 
                                 style="width: 40px; height: 40px; opacity: 0.7;">
                        </div>
                    </div>
                `;
                output.style.opacity = '1';
            }, 300);
        }

        function getJediChallenge() {
            const challengeOutput = document.getElementById('jedi-challenge');
            
            // Zufällige Herausforderung auswählen
            const randomChallenge = jediChallenges[Math.floor(Math.random() * jediChallenges.length)];
            
            challengeOutput.style.opacity = '0';
            
            setTimeout(() => {
                challengeOutput.innerHTML = `
                    <div style="text-align: center;">
                        <div style="color: #FFD700; font-size: 1.3em; margin-bottom: 10px;">
                            🌟 Heutige Jedi-Herausforderung 🌟
                        </div>
                        <div style="color: white; font-size: 1.1em; line-height: 1.5; 
                            background-color: rgba(255, 215, 0, 0.1); 
                            padding: 20px; border-radius: 10px; 
                            border: 2px solid rgba(255, 215, 0, 0.3);">
                            ${randomChallenge}
                        </div>
                        <div style="color: var(--accent-color); font-size: 0.9em; margin-top: 15px;">
                            "Der Weg der Jedi erfordert tägliche Übung."
                        </div>
                    </div>
                `;
                challengeOutput.style.opacity = '1';
            }, 300);
        }
        
        // Cita al cargar la página de Jedi
        setTimeout(() => {
            if (document.getElementById('jedi-section').style.display !== 'none') {
                getJediWisdom();
            }
        }, 500);

        // API de Clima Simple - SOLO wttr.in
        async function getSimpleWeather() {
            const cityInput = document.getElementById('city-input');
            const output = document.getElementById('weather-output');
            const city = cityInput.value.trim();
            
            if (!city) {
                output.innerHTML = '<div style="text-align: center; color: #ff9999;">Bitte geben Sie eine Stadt ein!</div>';
                return;
            }
            
            output.innerHTML = '<div class="loading" style="text-align: center;">Lade Wetterdaten...</div>';
            
            try {
                // SOLO wttr.in - NINGUNA otra API
                const response = await fetch(`https://wttr.in/${encodeURIComponent(city)}?format=j1`);
                
                if (!response.ok) {
                    throw new Error('Stadt nicht gefunden');
                }
                
                const data = await response.json();
                const current = data.current_condition[0];
                
                output.innerHTML = `
                    <div style="width: 100%;">
                        <h3 style="color: var(--primary-color); text-align: center; margin-bottom: 30px; font-size: 1.5em;">
                            ${data.nearest_area[0].areaName[0].value}
                        </h3>
                        
                        <div style="text-align: center;">
                            <div style="font-size: 5em; margin: 20px 0;">
                                ${getWeatherEmoji(current.weatherCode)}
                            </div>
                            <p style="font-size: 3.5em; margin: 20px 0; color: white; font-weight: bold;">
                                ${current.temp_C}°C
                            </p>
                            <p style="color: var(--accent-color); font-size: 1.5em; margin: 20px 0;">
                                ${current.weatherDesc[0].value}
                            </p>
                            <p style="color: var(--accent-color); margin-top: 30px; font-size: 1.2em;">
                                Feuchtigkeit: ${current.humidity}% | Wind: ${current.windspeedKmph} km/h
                            </p>
                        </div>
                    </div>
                `;
                
            } catch (error) {
                output.innerHTML = `
                    <div style="text-align: center; color: #ff9999;">
                        Fehler: Stadt nicht gefunden oder Verbindungsproblem
                    </div>
                `;
            }
        }
        
        // Emoji für Wetter
        function getWeatherEmoji(code) {
            const codeStr = String(code);
            if (codeStr === '113') return '☀️';
            if (codeStr === '116') return '⛅';
            if (codeStr === '119' || codeStr === '122') return '☁️';
            if (codeStr === '143' || codeStr === '248' || codeStr === '260') return '🌫️';
            if (codeStr.startsWith('2')) return '⛈️';
            if (codeStr.startsWith('3')) return '🌧️';
            if (codeStr === '179' || codeStr.startsWith('32') || codeStr.startsWith('33') || codeStr === '371') return '❄️';
            if (codeStr.startsWith('1') && parseInt(codeStr) > 170) return '🌦️';
            return '🌡️';
        }

        // Inicializar matrices al cargar la página
        window.onload = function() {
            // Crear matrices editables
            createEditableMatrix(adj1, 'adj1-matrix', 1);
            createEditableMatrix(adj2, 'adj2-matrix', 2);
            
            // Obtener todas las secciones y tabs
            const allSections = {
                'matrix': document.getElementById('matrix-section'),
                'nasa': document.getElementById('nasa-section'),
                'jedi': document.getElementById('jedi-section'),
                'weather': document.getElementById('weather-section')
            };

            const allTabs = {
                'matrix': document.getElementById('matrix-tab'),
                'nasa': document.getElementById('nasa-tab'),
                'jedi': document.getElementById('jedi-tab'),
                'weather': document.getElementById('weather-tab')
            };

            // Función general para cambiar secciones
            function showSection(sectionName) {
                // Ocultar todas las secciones
                Object.values(allSections).forEach(section => {
                    if (section) section.style.display = 'none';
                });
                
                // Desactivar todos los tabs
                Object.values(allTabs).forEach(tab => {
                    if (tab) tab.classList.remove('active');
                });
                
                // Mostrar la sección seleccionada
                if (allSections[sectionName]) {
                    allSections[sectionName].style.display = 'block';
                }
                if (allTabs[sectionName]) {
                    allTabs[sectionName].classList.add('active');
                }
            }

            // Event listeners para todos los tabs
            Object.keys(allTabs).forEach(key => {
                if (allTabs[key]) {
                    allTabs[key].addEventListener('click', () => showSection(key));
                }
            });
            
            // Cambiar tamaño de matrices
            document.getElementById('resize-btn').addEventListener('click', function() {
                const sizeInput = document.getElementById('matrix-size');
                let size = parseInt(sizeInput.value);
                
                // Validar el tamaño
                if (isNaN(size) || size < 2) {
                    size = 2;
                    sizeInput.value = "2";
                } else if (size > 10) {
                    size = 10;
                    sizeInput.value = "10";
                }
                
                // Crear nuevas matrices vacías
                adj1 = createMatrix(size, 0);
                adj2 = createMatrix(size, 0);
                activeMatrix = adj2;
                
                // Actualizar visualización
                createEditableMatrix(adj1, 'adj1-matrix', 1);
                createEditableMatrix(adj2, 'adj2-matrix', 2);
                
                document.getElementById('output').textContent = `Matrix-Größe auf ${size}×${size} geändert.`;
            });
            
            // Seleccionar todo el texto al hacer clic en el input de tamaño
            document.getElementById('matrix-size').addEventListener('focus', function() {
                this.select();
            });
            
            // Botones para seleccionar matriz activa
            document.getElementById('use-matrix1-btn').addEventListener('click', function() {
                activeMatrix = adj1;
                document.getElementById('output').textContent = 'Matrix 1 für Berechnungen ausgewählt.';
            });
            
            document.getElementById('use-matrix2-btn').addEventListener('click', function() {
                activeMatrix = adj2;
                document.getElementById('output').textContent = 'Matrix 2 für Berechnungen ausgewählt.';
            });

            // Botón de cálculo
            document.getElementById('calculate-btn').addEventListener('click', function() {
                const outputDiv = document.getElementById('output');
                
                try {
                    // Realizar cálculos
                    const squared = multiply(activeMatrix, activeMatrix);
                    const cubed = multiply(squared, activeMatrix);
                    const distances = calculateDistances(activeMatrix);
                    const eccentricity = calculateEccentricity(distances);
                    const radius = calculateRadius(eccentricity);
                    
                    // Mostrar resultados
                    let results = `>>> MATRIX VOYAGER INITIALISIERT <<<\n\n`;
                    results += `Adjazenzmatrix:\n${printAdj(activeMatrix)}\n`;
                    results += `\nQuadrat (Hyperraumsprung 2):\n${printAdj(squared)}\n`;
                    results += `\nKubik (Hyperraumsprung 3):\n${printAdj(cubed)}\n`;
                    results += `\nDistanzmatrix (Rebellenrouten):\n${printAdj(distances)}\n`;
                    results += `\nExzentrizität (Machtbalance):\n${eccentricity}\n`;
                    results += `\nRadius des Graphen (Galaktischer Kern): ${radius}\n`;
                    results += `\n>>> CODEX PRIME ÜBERTRAGUNG BEENDET <<<`;
                    
                    outputDiv.textContent = results;
                } catch (error) {
                    outputDiv.textContent = `Berechnungsfehler: ${error.message}`;
                }
            });
            
            // Botón de limpiar
            document.getElementById('clear-btn').addEventListener('click', function() {
                document.getElementById('output').textContent = 'MATRIX VOYAGER wartet auf Befehle...';
            });
        }; // Este es el cierre del window.onload
    </script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const Icons = {
            Star : '🪐',
            Navigation: '🧭',
            Info: 'ℹ️'
        };
        
        const NASASection = () => {
            const [selectedSection, setSelectedSection] = useState('apod');
            const [apodData, setApodData] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            
            // NASA API Key
            const NASA_API_KEY = 'm9K4tcMYB9ef5mxhxNEO2O6h6Rfq0sEAycQrI0jd';
            
            // NASA Astronomy Picture of the Day API
            useEffect(() => {
                const fetchAPOD = async () => {
                    if (selectedSection === 'apod') {
                        setLoading(true);
                        setError(null);
                        try {
                            const response = await fetch(
                                `https://api.nasa.gov/planetary/apod?api_key=${NASA_API_KEY}`
                            );
                            const data = await response.json();
                            
                            if (data.error) {
                                setError(data.error.message || 'API-Schlüssel ungültig - Bitte registrieren Sie sich bei api.nasa.gov');
                            } else {
                                setApodData(data);
                            }
                        } catch (err) {
                            setError('Fehler beim Abrufen des Astronomie-Bildes. Bitte prüfen Sie Ihre Internetverbindung.');
                        } finally {
                            setLoading(false);
                        }
                    }
                };
                
                fetchAPOD();
            }, [selectedSection]);
            
            const sections = [
                { id: 'apod', name: 'Bild des Tages', icon: Icons.Star },
                { id: 'mission', name: 'Missionsdaten', icon: Icons.Navigation }
            ];
            
            return (
                <div>
                    <div className="lightsaber alt"></div>
                    
                    <h2>Galaktische NASA Datenbank</h2>
                    
                    <div style={{ textAlign: 'center', marginBottom: '20px' }}>
                        <p style={{ color: '#87CEFA' }}>
                            Hinweis: Für vollständige NASA-Daten benötigen Sie einen API-Schlüssel von 
                            <a href="https://api.nasa.gov" target="_blank" rel="noopener noreferrer" style={{ color: '#00BFFF', marginLeft: '5px' }}>
                                api.nasa.gov
                            </a>
                        </p>
                    </div>
                    
                    <div className="navigation-tabs">
                        {sections.map(section => (
                            <button
                                key={section.id}
                                onClick={() => setSelectedSection(section.id)}
                                className={`nav-button ${selectedSection === section.id ? 'active' : ''}`}
                            >
                                <span>{section.icon}</span> {section.name}
                            </button>
                        ))}
                    </div>
                    
                    {loading && (
                        <div className="loading">
                            <p>Lade Daten aus dem Weltraum...</p>
                        </div>
                    )}
                    
                    {error && (
                        <div className="error-box">
                            <p>Fehler: {error}</p>
                        </div>
                    )}
                    
                    {/* Astronomy Picture of the Day */}
                    {selectedSection === 'apod' && apodData && !loading && (
                        <div>
                            <h3>{Icons.Star} Astronomie-Bild des Tages</h3>
                            <div>
                                {apodData.media_type === 'image' ? (
                                    <img 
                                        src={apodData.url} 
                                        alt={apodData.title}
                                        className="nasa-image"
                                    />
                                ) : (
                                    <iframe
                                        src={apodData.url}
                                        style={{width: '100%', height: '400px', borderRadius: '8px'}}
                                        title={apodData.title}
                                        frameBorder="0"
                                        allowFullScreen
                                    />
                                )}
                                <div className="output" style={{marginTop: '20px'}}>
                                    <h3>{apodData.title}</h3>
                                    <p style={{color: '#87CEFA', marginBottom: '10px'}}>{apodData.date}</p>
                                    <p style={{color: 'white', whiteSpace: 'normal'}}>{apodData.explanation}</p>
                                    {apodData.copyright && (
                                        <p style={{color: '#87CEFA', marginTop: '10px'}}>
                                            © {apodData.copyright}
                                        </p>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Mission Data */}
                    {selectedSection === 'mission' && (
                        <div>
                            <h3>{Icons.Navigation} Historische Missionsdaten</h3>
                            <div className="mission-grid">
                                <div className="mission-card">
                                    <h3>Apollo 11</h3>
                                    <div className="mission-info">
                                        <span>Mission:</span>
                                        <span>Erste Mondlandung</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Datum:</span>
                                        <span>20. Juli 1969</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Dauer:</span>
                                        <span>8 Tage, 3 Stunden</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Crew:</span>
                                        <span>Armstrong, Aldrin, Collins</span>
                                    </div>
                                </div>
                                
                                <div className="mission-card">
                                    <h3>Voyager 1</h3>
                                    <div className="mission-info">
                                        <span>Mission:</span>
                                        <span>Interstellare Sonde</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Start:</span>
                                        <span>5. September 1977</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Entfernung:</span>
                                        <span>~22 Milliarden km</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Status:</span>
                                        <span>Im interstellaren Raum</span>
                                    </div>
                                </div>
                                
                                <div className="mission-card">
                                    <h3>Mars Perseverance</h3>
                                    <div className="mission-info">
                                        <span>Mission:</span>
                                        <span>Mars-Rover</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Landung:</span>
                                        <span>18. Februar 2021</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Status:</span>
                                        <span>Aktiv</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Entdeckungen:</span>
                                        <span>Organische Moleküle</span>
                                    </div>
                                </div>
                                
                                <div className="mission-card">
                                    <h3>James Webb Teleskop</h3>
                                    <div className="mission-info">
                                        <span>Mission:</span>
                                        <span>Weltraumteleskop</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Start:</span>
                                        <span>25. Dezember 2021</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Entfernung:</span>
                                        <span>~1.5 Millionen km (L2)</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Instrumente:</span>
                                        <span>NIRCam, MIRI, NIRSpec</span>
                                    </div>
                                </div>
                                
                                <div className="mission-card">
                                    <h3>Artemis I</h3>
                                    <div className="mission-info">
                                        <span>Mission:</span>
                                        <span>Mond-Testflug</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Start:</span>
                                        <span>16. November 2022</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Dauer:</span>
                                        <span>25.5 Tage</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Nächste:</span>
                                        <span>Artemis II (2025)</span>
                                    </div>
                                </div>
                                
                                <div className="mission-card">
                                    <h3>Hubble Teleskop</h3>
                                    <div className="mission-info">
                                        <span>Mission:</span>
                                        <span>Weltraumteleskop</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Start:</span>
                                        <span>24. April 1990</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Status:</span>
                                        <span>Aktiv seit 34 Jahren</span>
                                    </div>
                                    <div className="mission-info">
                                        <span>Beobachtungen:</span>
                                        <span>1.5+ Millionen</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('react-root'));
        root.render(<NASASection />);
    </script>
</body>
</html>